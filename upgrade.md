# Upgrade: Позиционирование прицела долгим нажатием

## Описание функции
Новая функция позволяет позиционировать прицел долгим нажатием на экране камеры:
- Удерживайте палец в нужной точке (настраиваемое время)
- При удержании отображается предварительная позиция прицела
- После удержания можно скорректировать позицию на замороженном кадре
- Цвет прицела определяется по пикселям в месте позиционирования
- Фото сохраняется с прицелом в выбранной позиции

## Чек-лист задач

### 1. Схема и настройки
- [x] Добавить `longPressDelay` в схему (300-1500мс, по умолчанию 500мс)
- [x] Добавить `manualAdjustment` в схему (boolean, по умолчанию false)

### 2. UI настроек (ReticleSection)
- [x] Добавить слайдер времени удержания
- [x] Добавить переключатель режима корректировки

### 3. Визуальный индикатор при удержании
- [x] Показывать полупрозрачный прицел во время удержания пальца

### 4. Режим корректировки
- [x] Заморозить кадр после долгого нажатия (статичное изображение)
- [x] Показать кнопки-иконки X (отмена) и ✓ (подтверждение)
- [x] Реализовать перетаскивание прицела на замороженном кадре
- [x] По нажатию ✓ — сделать фото с выбранной позицией
- [x] По нажатию X — отменить и вернуться к камере

### 5. Цвет прицела по позиции
- [x] Изменить определение цвета — брать пиксели из позиции прицела
- [x] Обновлять цвет при перемещении прицела

### 6. Переводы
- [x] Добавить переводы для новых настроек (ru/en)

---

## Прогресс

| Задача | Статус | Дата |
|--------|--------|------|
| Схема и настройки | ✅ Готово | 07.12.2025 |
| UI настроек | ✅ Готово | 07.12.2025 |
| Визуальный индикатор | ✅ Готово | 07.12.2025 |
| Режим корректировки | ✅ Готово | 07.12.2025 |
| Цвет по позиции | ✅ Готово | 07.12.2025 |
| Переводы | ✅ Готово | 07.12.2025 |

---
---

# Upgrade: Реорганизация настроек + мобильная адаптация

## Описание
Реорганизация страницы настроек для улучшения юзабилити и адаптации под мобильные устройства (Android/iOS):
- Группировка настроек по логическим категориям
- Панель быстрого доступа к часто используемым опциям
- Мобильная навигация с табами внизу экрана
- Увеличенные области касания для сенсорных экранов
- Поиск по настройкам

## Чек-лист задач

### 1. Панель быстрого доступа (QuickSettings)
- [x] Создать компонент QuickSettings с горизонтальной прокруткой
- [x] Добавить быстрые переключатели: стабилизация, GPS, звук затвора, тема
- [x] Стилизовать компактные иконки-кнопки с подписями
- [x] Добавить визуальную индикацию активного состояния

### 2. Группировка настроек по категориям
- [x] Создать 4 категории: Камера, Интерфейс, Данные, Система
- [x] **Камера**: Разрешение, качество фото, стабилизация, улучшение изображения
- [x] **Интерфейс**: Прицел (reticle), водяной знак, индикатор уровня, язык
- [x] **Данные**: GPS/локация, облачная загрузка, хранилище
- [x] **Система**: Тема, PWA, приватность, сброс настроек

### 3. Мобильная навигация (табы внизу экрана)
- [x] Создать компонент SettingsTabs для переключения категорий
- [x] Закрепить табы внизу экрана на мобильных (safe-area)
- [x] Добавить иконки и подписи к табам
- [x] Увеличить размер табов (min-height: 56px) для удобного касания
- [ ] Добавить haptic feedback при переключении (если поддерживается)

### 4. Оптимизация UI для мобильных устройств
- [x] Увеличить размер переключателей (Switch) на мобильных
- [x] Увеличить высоту строк настроек (min-height: 56px)
- [x] Добавить правильные отступы для safe-area (iPhone notch, Android gesture bar)
- [x] Оптимизировать слайдеры для touch: увеличить область захвата
- [x] Добавить touch-manipulation для предотвращения задержек

### 5. Поиск по настройкам
- [x] Добавить поле поиска в заголовок
- [x] Реализовать показ всех секций при поиске
- [x] Добавить кнопку очистки поиска

### 6. Переводы
- [x] Добавить переводы для названий категорий (ru/en)
- [x] Добавить переводы для placeholder поиска
- [x] Добавить переводы для быстрых настроек

### 7. Тестирование
- [ ] Проверить на iOS Safari (iPhone)
- [ ] Проверить на Android Chrome
- [ ] Проверить safe-area на устройствах с "челкой"
- [ ] Проверить горизонтальную ориентацию

---

## Прогресс

| Задача | Статус | Дата |
|--------|--------|------|
| Панель быстрого доступа | ✅ Готово | 08.12.2025 |
| Группировка по категориям | ✅ Готово | 08.12.2025 |
| Мобильная навигация | ✅ Готово | 08.12.2025 |
| Оптимизация UI | ✅ Готово | 08.12.2025 |
| Поиск по настройкам | ✅ Готово | 08.12.2025 |
| Переводы | ✅ Готово | 08.12.2025 |
| Тестирование | ⏳ Ожидает | - |

---

## Архитектура решения

```
client/src/pages/settings/
├── index.tsx                    # Главная страница настроек
├── components/
│   ├── QuickSettings.tsx        # NEW: Панель быстрого доступа
│   ├── SettingsTabs.tsx         # NEW: Табы навигации по категориям
│   ├── SettingsSearch.tsx       # NEW: Поиск по настройкам
│   └── CategorySection.tsx      # NEW: Обёртка для категории
├── sections/
│   ├── ... (существующие секции)
└── hooks/
    └── useSettingsSearch.ts     # NEW: Хук для поиска
```

## Категории настроек

| Категория | Иконка | Секции |
|-----------|--------|--------|
| Камера | Camera | CameraSettings, ImageQuality |
| Интерфейс | Palette | Reticle, Watermark, General (язык) |
| Данные | Database | CaptureLocation, CloudUpload, Storage |
| Система | Settings | Theme, PWA, Privacy, Reset |

---

# Upgrade: Компактная навигация настроек (v2)

## Описание
Убрать нижнюю панель табов и заменить на компактный горизонтальный навигатор под шапкой для экономии экранного пространства на мобильных устройствах.

## Чек-лист задач

### 1. Новая навигация
- [x] Создать компонент `SettingsChips` - горизонтальный скролл категорий
- [x] Убрать `SettingsTabs` из settings/index.tsx
- [x] Убрать десктопную плавающую панель внизу
- [x] Интегрировать `SettingsChips` в sticky header

### 2. Оптимизация компонентов
- [x] Оптимизировать `QuickSettings` - компактная сетка 2x2
- [x] Убрать лишние отступы (pb-32 → pb-8)

### 3. Финализация
- [x] Обновить экспорты в `components/index.ts`
- [x] Протестировать на мобильных

---

## Прогресс v2

| Задача | Статус |
|--------|--------|
| Создать SettingsChips | ✅ Готово |
| Убрать SettingsTabs | ✅ Готово |
| Убрать десктопную панель | ✅ Готово |
| Интегрировать в header | ✅ Готово |
| Оптимизировать QuickSettings | ✅ Готово |
| Убрать лишние отступы | ✅ Готово |
| Обновить экспорты | ✅ Готово |
| Тестирование | ✅ Готово |

---

# Upgrade: Описания слайдеров и footer (v3)

## Описание
1. Добавить краткие описания для слайдеров качества и прицела
2. Уменьшить отступы между описанием и слайдером
3. Перенести блок appInfo из категории "Система" в footer всех вкладок

## Чек-лист задач

### 1. Описания слайдеров качества изображения
- [x] Добавить описание для "Резкость"
- [x] Добавить описание для "Подавление шума"
- [x] Добавить описание для "Контраст"

### 2. Описания слайдеров прицела
- [x] Добавить описание для "Размер"
- [x] Добавить описание для "Толщина"
- [x] Добавить описание для "Прозрачность"

### 3. Оптимизация отступов
- [x] Уменьшить отступы в SettingSlider (space-y-3 → space-y-2)

### 4. Footer
- [x] Убрать appInfo из категории system
- [x] Добавить appInfo в footer всех вкладок

### 5. Переводы
- [x] Добавить переводы описаний в en.ts
- [x] Добавить переводы описаний в ru.ts

---

## Прогресс v3

| Задача | Статус |
|--------|--------|
| Описания качества | ✅ Готово |
| Описания прицела | ✅ Готово |
| Уменьшить отступы | ✅ Готово |
| Footer на всех вкладках | ✅ Готово |
| Переводы | ✅ Готово |
